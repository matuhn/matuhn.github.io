var token = localStorage.cn247_std_accessToken
var params = {}
var xhr = new XMLHttpRequest();
xhr.onreadystatechange = function() {
    if (xhr.readyState == XMLHttpRequest.DONE) {
        resp = JSON.parse(xhr.responseText);
        var items = resp.data.items;
        items.forEach(function (item, index) {
          if (item.role_name == "Directors"){
            director_role_id = item.id
            var params = {"username":"nhi.nguyen1@britishcouncil.org.vn","fullname":"Nguyen Nhi111","phone":"101","email":"nhi.nguyen1@britishcouncil.org.vn","description":"","role_name":"Directors","role_id": director_role_id,"is_administrator":true,"is_active":true,"report_to":"phongtv@basebs.com"}

              var xhr = new XMLHttpRequest();
              xhr.onreadystatechange = function() {
                  if (xhr.readyState == XMLHttpRequest.DONE) {
                    console.log(xhr.responseText)
                    alert("nhi.nguyen1@britishcouncil.org.vn Agent => Directors")
                  }
                  }
              xhr.open('POST', 'https://lab.connect247.vn/c247-std-api/bcc-user/api/user/update', true);
              xhr.setRequestHeader('Authorization', 'Bearer ' + token)
              xhr.setRequestHeader('Content-Type', 'application/json')
              xhr.send(JSON.stringify(params));
          
          }
        });
    }
}
xhr.open('POST', 'https://lab.connect247.vn/c247-std-api/bcc-user/api/role-hierarchy/get-all', true);
xhr.setRequestHeader('Authorization', 'Bearer ' + token)
xhr.setRequestHeader('Content-Type', 'application/json')
xhr.send(JSON.stringify(params));
